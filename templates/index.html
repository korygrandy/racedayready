<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raceday Ready</title>

    <meta name="description" content="Your essential trackside companion. Manage vehicles, create checklists, and log lap times to ensure you're always Raceday Ready!">
    <meta property="og:title" content="Raceday Ready">
    <meta property="og:description" content="Your essential trackside companion. Manage vehicles, create checklists, and log lap times to ensure you're always Raceday Ready!">
    <meta property="og:image" content="https://storage.googleapis.com/raceday-ready-assets/social-card-image.png">
    <meta property="og:url" content="https://www.racedayreadyapp.com/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Raceday Ready">
    <meta name="twitter:description" content="Your essential trackside companion. Manage vehicles, create checklists, and log lap times to ensure you're always Raceday Ready!">
    <meta name="twitter:image" content="https://storage.googleapis.com/raceday-ready-assets/social-card-image.png">

    <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%3E%3Cpath%20fill='white'%20d='M25,5%20C10,5%205,20%205,30%20C5,45%2015,45%2025,45%20C35,45%2045,45%2045,30%20C45,20%2040,5%2025,5%20Z'%3E%3C/path%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-body text-text-primary transition-colors duration-300">

    <div id="app-container" class="h-screen flex flex-col font-sans">
        <div id="global-header" class="w-full p-4 flex justify-between items-center">
            <div id="profile-section" class="flex items-center space-x-4">
                <div id="profile-header-btn" class="hidden items-center space-x-4 cursor-pointer p-2 rounded-lg hover:bg-interactive-hover" title="Change Profile">
                    <div id="features-helmet-display" class="w-12 h-12"></div>
                    <span id="features-username" class="text-lg font-semibold"></span>
                </div>
            </div>
            <div id="raceday-countdown-container" class="hidden items-center">
                <span id="raceday-countdown-label" class="text-lg font-bold mr-2 hidden">Days Until Raceday:</span>
                <div id="raceday-countdown-circle" class="w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center text-white shadow-lg hidden">
                    <span id="raceday-countdown-days" class="text-3xl font-bold"></span>
                </div>
                <div id="no-raceday-icon" class="hidden">
                     <a href="#" id="add-raceday-link" class="text-blue-500 hover:underline text-lg">+ Add Race</a>
                </div>
            </div>
            <div id="theme-switcher-container">
                 <button id="theme-switcher-btn" class="p-2 rounded-full hover:bg-interactive-hover" title="Toggle Theme">
                    </button>
            </div>
        </div>
        <main class="flex-grow w-full p-4 overflow-y-auto">
            <div class="w-full max-w-6xl mx-auto">
                <div id="main-view" class="w-full text-center py-16">
                    <h1 id="main-heading" class="text-4xl md:text-5xl font-bold mb-4">Hello World!</h1>
                    <p id="main-subheading" class="text-xl md:text-2xl mb-8">Welcome to Raceday Ready!</p>
                    <button id="ready-button" class="px-8 py-4 bg-blue-500 text-white font-semibold rounded-lg shadow-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-300 ease-in-out transform hover:-translate-y-1">
                        Click to get ready!
                    </button>
                </div>

                <div id="features-view" class="w-full max-w-6xl mx-auto hidden text-center py-16">
                    <h1 id="features-heading" class="text-4xl md:text-5xl font-bold mb-8">Raceday Ready Features</h1>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div id="feature-card-1" class="bg-card p-6 rounded-lg shadow-lg hover:bg-interactive-hover cursor-pointer"><h2 class="text-xl font-bold mb-2">Race Day Preparation & Logistics</h2></div>
                        <div id="feature-card-2" class="bg-card p-6 rounded-lg shadow-lg hover:bg-interactive-hover cursor-pointer"><h2 class="text-xl font-bold mb-2">Vehicle Management</h2></div>
                        <div id="feature-card-6" class="bg-card p-6 rounded-lg shadow-lg hover:bg-interactive-hover cursor-pointer"><h2 class="text-xl font-bold mb-2">Garage Management</h2></div>
                        <div id="feature-card-8" class="bg-card p-6 rounded-lg shadow-lg hover:bg-interactive-hover cursor-pointer"><h2 class="text-xl font-bold mb-2">Winner's Circle</h2></div>
                        <div id="feature-card-7" class="bg-card p-6 rounded-lg shadow-lg hover:bg-interactive-hover cursor-pointer"><h2 class="text-xl font-bold mb-2">Upcoming Features</h2></div>
                    </div>
                </div>

                <div id="race-day-prep-view" class="w-full max-w-6xl mx-auto hidden text-center py-16">
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">Race Day Preparation & Logistics</h1>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div id="race-schedule-card" class="bg-card p-6 rounded-lg shadow-lg hover:bg-interactive-hover cursor-pointer"><h2 class="text-xl font-bold mb-2">Race Schedule</h2></div>
                        <div id="checklist-templates-card" class="bg-card p-6 rounded-lg shadow-lg hover:bg-interactive-hover cursor-pointer"><h2 class="text-xl font-bold mb-2">Checklist Templates</h2></div>
                        <div id="automated-tasks-card" class="bg-card p-6 rounded-lg shadow-lg inactive-card"><h2 class="text-xl font-bold mb-2">Automated Tasks & Schedules</h2></div>
                        <div id="track-info-card" class="bg-card p-6 rounded-lg shadow-lg inactive-card"><h2 class="text-xl font-bold mb-2">Track Information Management</h2></div>
                    </div>
                    <button id="back-to-features-btn" class="mt-8 px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500">
                        Back to Features
                    </button>
                </div>

                <div id="race-schedule-view" class="w-full max-w-4xl mx-auto hidden text-center py-16">
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">Race Schedule</h1>
                    <div class="bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Add New Event</h2>
                        <form id="add-event-form">
                            <div class="space-y-4">
                                <div>
                                    <label for="event-name-input" class="block text-sm font-medium">Event Name</label>
                                    <input type="text" id="event-name-input" maxlength="50" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="event-start-input" class="block text-sm font-medium">Start Time</label>
                                        <input type="datetime-local" id="event-start-input" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                                    </div>
                                    <div>
                                        <label for="event-end-input" class="block text-sm font-medium">End Time</label>
                                        <input type="datetime-local" id="event-end-input" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium">Vehicles</label>
                                    <div id="event-vehicles-container" class="mt-1 grid grid-cols-3 md:grid-cols-5 gap-2 bg-input border border-border rounded-md p-2 h-32 overflow-y-auto"></div>
                                </div>
                                <div>
                                    <label for="event-checklists-select" class="block text-sm font-medium">Checklists</label>
                                    <select id="event-checklists-select" multiple class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 h-32"></select>
                                </div>
                                <div class="relative flex items-start">
                                    <div class="flex items-center h-5">
                                        <input id="is-raceday-checkbox" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-border rounded">
                                    </div>
                                    <div class="ml-3 text-sm">
                                        <label for="is-raceday-checkbox" class="font-medium">This is a Raceday Event</label>
                                    </div>
                                </div>
                            </div>
                            <button id="add-event-btn" type="submit" class="mt-6 w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600">Add Event</button>
                        </form>
                    </div>
                    <div class="mt-8 bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Upcoming Events</h2>
                        <div id="event-list" class="space-y-4">
                        </div>
                    </div>
                    <button id="back-to-prep-from-schedule-btn" class="mt-8 px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500">
                        Back to Prep & Logistics
                    </button>
                </div>

                <div id="lap-time-view" class="w-full max-w-4xl mx-auto hidden text-center py-16">
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">Winner's Circle</h1>
                    <div class="bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Record a Lap Time</h2>
                        <form id="lap-time-form">
                            <div class="space-y-4">
                                <div>
                                    <label for="lap-time-event-select" class="block text-sm font-medium">Select Raceday Event</label>
                                    <select id="lap-time-event-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required></select>
                                </div>
                                <div>
                                    <label for="lap-time-input" class="block text-sm font-medium">Lap Time (MM:SS.ms)</label>
                                    <input type="text" id="lap-time-input" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 01:45.123" required>
                                </div>
                            </div>
                            <button id="submit-lap-time-btn" type="submit" class="mt-6 w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600">Submit Time</button>
                        </form>
                    </div>
                    <div class="mt-8 bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 id="winner-circle-heading" class="text-2xl font-bold mb-4">Winner's Circle</h2>
                        <div id="lap-time-list" class="space-y-2">
                        </div>
                    </div>
                    <button id="back-to-features-from-laps-btn" class="mt-8 px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500">
                        Back to Features
                    </button>
                </div>

                <div id="checklist-management-view" class="w-full max-w-4xl mx-auto hidden text-center py-16">
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">Checklist Templates</h1>
                    <div class="bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Add New Checklist Template</h2>
                        <form id="add-checklist-form">
                            <div>
                                <label for="checklist-name-input" class="block text-sm font-medium">Template Name</label>
                                <input type="text" id="checklist-name-input" maxlength="50" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                            <button id="add-checklist-btn" type="submit" class="mt-4 w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600">Create Template</button>
                        </form>
                    </div>
                    <div class="mt-8 bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">My Checklist Templates</h2>
                        <div id="checklist-list" class="space-y-4">
                        </div>
                    </div>
                    <button id="back-to-prep-from-checklists-btn" class="mt-8 px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500">
                        Back to Prep & Logistics
                    </button>
                </div>

                <div id="vehicle-management-view" class="w-full max-w-4xl mx-auto hidden text-center py-16">
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">Vehicle Management</h1>
                    <div id="add-vehicle-section" class="bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Add a New Vehicle</h2>
                        <div id="no-garages-warning" class="hidden bg-yellow-900/30 border border-yellow-700 text-yellow-300 px-4 py-3 rounded-lg mb-4">
                            You must create a garage before you can add a vehicle. <a href="#" id="go-to-garage-link" class="font-bold underline">Add one now.</a>
                        </div>
                        <form id="add-vehicle-form">
                            <fieldset id="add-vehicle-fieldset">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label for="vehicle-year-search" class="block text-sm font-medium">Search Year</label>
                                        <input type="text" id="vehicle-year-search" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 2023">
                                        <select id="vehicle-year-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required></select>
                                    </div>
                                    <div>
                                        <label for="vehicle-make-search" class="block text-sm font-medium">Search Make</label>
                                        <input type="text" id="vehicle-make-search" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Ford">
                                        <select id="vehicle-make-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required disabled></select>
                                    </div>
                                    <div>
                                        <label for="vehicle-model-search" class="block text-sm font-medium">Search Model</label>
                                        <input type="text" id="vehicle-model-search" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Mustang">
                                        <select id="vehicle-model-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required disabled></select>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <label for="vehicle-garage-select" class="block text-sm font-medium">Assign to Garage</label>
                                    <select id="vehicle-garage-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"></select>
                                </div>
                                <div class="mt-4">
                                    <label for="vehicle-photo-input" class="block text-sm font-medium">Vehicle Photo</label>
                                    <input type="file" id="vehicle-photo-input" accept="image/*" class="mt-1 block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"/>
                                    <div class="relative mt-2">
                                        <div class="absolute inset-0 flex items-center" aria-hidden="true"><div class="w-full border-t border-border"></div></div>
                                        <div class="relative flex justify-center"><span class="px-2 bg-card text-sm text-text-secondary">OR</span></div>
                                    </div>
                                    <input type="text" id="vehicle-photo-url-input" class="mt-2 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Enter Image URL">
                                    <img id="vehicle-photo-preview" class="hidden mt-4 rounded-lg max-h-48 w-auto"/>
                                </div>
                                <button id="add-vehicle-btn" type="submit" class="mt-6 w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600">Add Vehicle</button>
                            </fieldset>
                        </form>
                    </div>
                    <div class="mt-8 bg-card p-8 rounded-lg shadow-lg text-left">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">My Vehicles</h2>
                            <div>
                                <button id="vehicle-sort-btn" class="px-3 py-1 bg-gray-600 text-white rounded-md hover:bg-gray-500 text-sm">
                                    Sort by Year (Newest First)
                                </button>
                            </div>
                        </div>
                        <div id="vehicle-list" class="space-y-4">
                        </div>
                    </div>
                    <button id="back-to-features-from-vehicle-btn" class="mt-8 px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500">
                        Back to Features
                    </button>
                </div>

                <div id="garage-management-view" class="w-full max-w-4xl mx-auto hidden text-center py-16">
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">Garage Management</h1>
                    <div class="bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Add a New Garage</h2>
                        <form id="add-garage-form">
                            <label for="garage-name-input" class="block text-sm font-medium">Garage Name</label>
                            <input type="text" id="garage-name-input" maxlength="25" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            <button id="add-garage-btn" type="submit" class="mt-4 w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600">Add Garage</button>
                        </form>
                    </div>
                    <div class="mt-8 bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">My Garages</h2>
                        <div id="garage-list" class="space-y-4">
                        </div>
                    </div>
                    <button id="back-to-features-from-garage-btn" class="mt-8 px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500">
                        Back to Features
                    </button>
                </div>

                <div id="upcoming-features-view" class="w-full max-w-4xl mx-auto hidden text-center py-16">
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">Upcoming Features & Requests</h1>

                    <div id="critical-features-section" class="mb-8 bg-yellow-900/30 border border-yellow-700 p-6 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold text-yellow-300 mb-4">Critical Upcoming Features</h2>
                        <p class="text-yellow-400 mb-4">Based on our goals, here are the top three features we should prioritize:</p>
                        <ol class="list-decimal list-inside space-y-3">
                            <li><strong>Advanced Race Day Checklists:</strong> Create dynamic, template-based checklists for pre-race, mid-day, and post-race activities to ensure nothing is missed.</li>
                            <li><strong>Tire Management Module:</strong> A dedicated section to track tire sets, heat cycles, pressures, and performance notes to optimize usage and on-track results.</li>
                            <li><strong>Basic Telemetry Integration:</strong> Allow users to upload data from popular lap timers (e.g., AiM, VBOX) to view key metrics and link them to session notes.</li>
                        </ol>
                    </div>

                    <div class="bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Submit a Feature Request</h2>
                        <p class="text-text-secondary mb-6">Have an idea for a new feature? Let us know!</p>
                        <form id="feature-request-form">
                            <textarea id="feature-request-textarea" rows="4" maxlength="500" class="w-full bg-input border border-border rounded-md p-2" placeholder="Describe your feature idea..."></textarea>
                            <div class="text-right text-sm text-text-secondary mt-1"><span id="char-counter">0 / 500</span></div>
                            <button id="submit-feature-request-btn" type="submit" class="mt-4 w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-blue-600">Submit Request</button>
                        </form>
                    </div>

                    <div id="existing-requests-section" class="mt-8 bg-card p-8 rounded-lg shadow-lg text-left">
                        <h2 class="text-2xl font-bold mb-4">Existing Requests</h2>
                        <div id="feature-request-list" class="space-y-4">
                        </div>
                    </div>

                     <button id="back-to-features-from-upcoming-btn" class="mt-8 px-6 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-500">
                        Back to Features
                    </button>
                </div>

                <div id="developer-view" class="w-full max-w-4xl mx-auto hidden text-left p-4">
                    <h2 id="developer-view-heading" class="text-3xl font-bold mb-6 border-b border-border pb-2">Developer Mode</h2>

                    <div id="admin-section" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">Administration</h3>
                        <div class="bg-card-darker p-4 rounded-lg shadow space-y-6">
                            <div>
                                <h4 class="font-bold text-lg">User Profile Limit</h4>
                                <p class="mt-2 text-text-secondary">Set the maximum number of user profiles (1-20).</p>
                                <div class="mt-4 flex items-center space-x-4">
                                    <input type="number" id="profile-limit-input" min="1" max="20" class="w-24 bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    <button id="update-profile-limit-btn" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700">Update</button>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg">Garage & Vehicle Limits</h4>
                                <div class="mt-4 space-y-4">
                                    <div class="flex items-center space-x-4">
                                        <input type="number" id="garage-limit-input" min="1" max="10" class="w-24 bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <label for="garage-limit-input">Garage limit per profile (1-10).</label>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <input type="number" id="vehicle-limit-input" min="1" max="25" class="w-24 bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <label for="vehicle-limit-input">Vehicle limit per profile (1-25).</label>
                                    </div>
                                    <button id="update-garage-vehicle-limits-btn" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700">Update Limits</button>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg">Feature Request Settings</h4>
                                <div class="mt-4 space-y-4">
                                    <div class="flex items-center space-x-4">
                                        <input type="number" id="feature-request-limit-input" min="1" max="50" class="w-24 bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <label for="feature-request-limit-input">Set the maximum number of requests (1-50).</label>
                                    </div>
                                    <div class="relative flex items-start">
                                        <div class="flex items-center h-5">
                                            <input id="enable-deletion-checkbox" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-border rounded">
                                        </div>
                                        <div class="ml-3 text-sm">
                                            <label for="enable-deletion-checkbox" class="font-medium">Enable deletion of feature requests.</label>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <button id="update-feature-settings-btn" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700">Update Settings</button>
                                        <button id="manage-feature-requests-link" class="text-sm text-blue-500 hover:underline">Manage Requests &rarr;</button>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg">Winner's Circle Settings</h4>
                                <div class="mt-4 space-y-4">
                                    <div class="relative flex items-start">
                                        <div class="flex items-center h-5">
                                            <input id="enable-lap-time-deletion-checkbox" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-border rounded">
                                        </div>
                                        <div class="ml-3 text-sm">
                                            <label for="enable-lap-time-deletion-checkbox" class="font-medium">Enable deletion of lap times.</label>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <button id="update-lap-time-settings-btn" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700">Update Settings</button>
                                        <a href="#" id="go-to-winners-circle-link" class="text-sm text-blue-500 hover:underline">Manage Lap Times &rarr;</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="readme-section" class="mb-8">
                        <h3 id="readme-heading" class="text-2xl font-semibold mb-3">Developer Readme</h3>
                        <div class="bg-card-darker p-4 rounded-lg shadow">
                            <h4 id="readme-subheading" class="font-bold text-lg">How to Run the Application</h4>
                            <p class="mt-2 text-text-secondary">To run this Flask application locally, ensure you have Python and the required packages (`Flask`, `firebase-admin`) installed. Navigate to the project's root directory in your terminal and execute the following command:</p>
                            <pre id="readme-code-block" class="bg-input p-2 rounded mt-2 text-text-secondary"><code>py app.py</code></pre>
                        </div>
                    </div>

                    <div id="changelog-section" class="mb-8">
                        <h3 id="changelog-heading" class="text-2xl font-semibold mb-3">Changelog</h3>
                        <div class="space-y-4">
                            {% for entry in changelog %}
                            <div class="bg-card-darker p-4 rounded-lg shadow">
                                <h4 class="font-bold text-lg">Version {{ entry.version }} ({{ entry.date }})</h4>
                                <ul class="list-disc list-inside mt-2 text-text-secondary space-y-1">
                                    {% for note in entry.notes %}
                                    <li>{{ note }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <div id="defect-resolutions-section" class="mb-8">
                        <h3 id="defect-resolutions-heading" class="text-2xl font-semibold mb-3">Defect Resolutions</h3>
                        <div class="space-y-4">
                            {% for defect in defects %}
                            <div id="{{ defect.id }}" class="bg-card-darker p-4 rounded-lg shadow">
                                <h4 class="font-bold text-lg">{{ defect.title }}</h4>
                                <p class="mt-2 text-text-secondary">
                                    <strong>Resolution:</strong> {{ defect.resolution }}
                                </p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                     <button id="back-to-app-btn" class="mt-8 px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700">Back to App</button>
                </div>
            </div>
        </main>

        <div id="footer-container" class="w-full text-center p-4">
            <button id="dev-mode-btn" class="text-sm text-blue-500 hover:underline mb-2">Developer Mode</button>
            <footer class="text-sm text-text-secondary flex flex-col items-center space-y-1 w-full max-w-4xl mx-auto">
                <span id="footer-text">Built with Python (Flask), Tailwind CSS, and Gemini 2.5 Pro</span>
                <div class="flex space-x-4">
                    <span id="footer-updated">Last Updated: {{ last_updated }}</span>
                    <span id="footer-version">Version {{ app_version }}</span>
                </div>
            </footer>
        </div>
    </div>

    <div id="message-box" class="fixed bottom-24 right-4 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg opacity-0 transform translate-y-10 z-50"></div>

    <div id="profile-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-2xl font-bold mb-4">Create Driver Profile</h2>
            <p class="text-text-secondary mb-6">Enter a username and choose a helmet color. The PIN is optional.</p>
            <form id="profile-form">
                <div class="space-y-4">
                    <div>
                        <label for="username-input" class="block text-sm font-medium">Username</label>
                        <input type="text" id="username-input" maxlength="12" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label for="helmet-color-input" class="block text-sm font-medium">Helmet Color</label>
                        <input type="color" id="helmet-color-input" value="#ffffff" class="mt-1 block w-full h-10">
                    </div>
                    <div>
                        <label for="theme-select" class="block text-sm font-medium">Theme</label>
                        <select id="theme-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <option value="dark">Dark</option>
                            <option value="light">Light</option>
                        </select>
                    </div>
                    <div class="relative flex items-start">
                        <div class="flex items-center h-5"><input id="enable-pin-checkbox" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-border rounded"></div>
                        <div class="ml-3 text-sm"><label for="enable-pin-checkbox" class="font-medium">Enable 4-Digit PIN</label></div>
                    </div>
                    <div>
                        <label for="pin-input" class="block text-sm font-medium">4-Digit PIN</label>
                        <input type="password" id="pin-input" maxlength="4" pattern="[0-9]{4}" autocomplete="new-password" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 disabled:opacity-50" disabled>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-4">
                    <button id="cancel-create-btn" type="button" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                    <button id="save-profile-btn" type="submit" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">Save Profile</button>
                </div>
            </form>
        </div>
    </div>

    <div id="select-profile-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-2xl font-bold mb-4">Select Driver Profile</h2>
            <div id="profile-list" class="space-y-2 mb-6"></div>
            <button id="add-new-profile-btn" class="w-full bg-green-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-green-700">Add New Profile</button>
        </div>
    </div>

    <div id="confirmation-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 id="confirmation-modal-title" class="text-2xl font-bold mb-4">Confirm Action</h2>
            <p class="text-text-secondary mb-6" id="confirmation-modal-text"></p>
            <div class="flex justify-end space-x-4">
                <button id="confirmation-modal-cancel-btn" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                <button id="confirmation-modal-confirm-btn" class="px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">Yes, Confirm</button>
            </div>
        </div>
    </div>

    <div id="pin-entry-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-2xl font-bold mb-4">Enter PIN</h2>
            <p class="text-text-secondary mb-6" id="pin-entry-text"></p>
            <form id="pin-entry-form">
                <input type="password" id="pin-entry-input" maxlength="4" autocomplete="off" class="block w-full text-center text-2xl tracking-[1em] bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                <div class="mt-6 flex justify-end space-x-4">
                    <button id="cancel-pin-entry-btn" type="button" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                    <button id="submit-pin-btn" type="submit" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <div id="dev-pin-entry-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-2xl font-bold mb-4">Developer Access</h2>
            <p class="text-text-secondary mb-6">Please enter the PIN to access Developer Mode.</p>
            <form id="dev-pin-entry-form">
                <input type="password" id="dev-pin-entry-input" maxlength="4" autocomplete="new-password" class="block w-full text-center text-2xl tracking-[1em] bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                <div class="mt-6 flex justify-end space-x-4">
                    <button id="cancel-dev-pin-btn" type="button" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                    <button id="submit-dev-pin-btn" type="submit" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <div id="pin-settings-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-2xl font-bold mb-4" id="pin-settings-heading"></h2>
            <form id="pin-settings-form">
                <div class="space-y-4">
                    <div class="relative flex items-start">
                        <div class="flex items-center h-5"><input id="edit-enable-pin-checkbox" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-border rounded"></div>
                        <div class="ml-3 text-sm"><label for="edit-enable-pin-checkbox" class="font-medium">Enable 4-Digit PIN</label></div>
                    </div>
                    <div>
                        <label for="edit-pin-input" class="block text-sm font-medium">New 4-Digit PIN</label>
                        <input type="password" id="edit-pin-input" maxlength="4" pattern="[0-9]{4}" autocomplete="new-password" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 disabled:opacity-50" disabled>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-4">
                    <button id="cancel-pin-settings-btn" type="button" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                    <button id="save-pin-settings-btn" type="submit" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">Save Settings</button>
                </div>
            </form>
        </div>
    </div>

    <div id="edit-vehicle-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-2xl font-bold mb-4">Edit Vehicle</h2>
            <form id="edit-vehicle-form">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="edit-vehicle-year-search" class="block text-sm font-medium">Search Year</label>
                        <input type="text" id="edit-vehicle-year-search" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 2023">
                        <select id="edit-vehicle-year-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required></select>
                    </div>
                    <div>
                        <label for="edit-vehicle-make-search" class="block text-sm font-medium">Search Make</label>
                        <input type="text" id="edit-vehicle-make-search" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Ford">
                        <select id="edit-vehicle-make-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required></select>
                    </div>
                    <div>
                        <label for="edit-vehicle-model-search" class="block text-sm font-medium">Search Model</label>
                        <input type="text" id="edit-vehicle-model-search" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Mustang">
                        <select id="edit-vehicle-model-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required></select>
                    </div>
                </div>
                <div class="mt-4">
                    <label for="edit-vehicle-garage-select" class="block text-sm font-medium">Assign to Garage</label>
                    <select id="edit-vehicle-garage-select" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"></select>
                </div>
                <div class="mt-4">
                    <label for="edit-vehicle-photo-input" class="block text-sm font-medium">Vehicle Photo</label>
                    <input type="file" id="edit-vehicle-photo-input" accept="image/*" class="mt-1 block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"/>
                    <div class="relative mt-2">
                        <div class="absolute inset-0 flex items-center" aria-hidden="true"><div class="w-full border-t border-border"></div></div>
                        <div class="relative flex justify-center"><span class="px-2 bg-card text-sm text-text-secondary">OR</span></div>
                    </div>
                    <input type="text" id="edit-vehicle-photo-url-input" class="mt-2 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Enter Image URL">
                    <img id="edit-vehicle-photo-preview" class="hidden mt-4 rounded-lg max-h-48 w-auto"/>
                </div>
                <div class="mt-6 flex justify-end space-x-4">
                    <button id="cancel-edit-vehicle-btn" type="button" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                    <button id="save-vehicle-btn" type="submit" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <div id="edit-event-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-md">
            <h2 class="text-2xl font-bold mb-4">Edit Event</h2>
            <form id="edit-event-form">
                <div class="space-y-4">
                    <div>
                        <label for="edit-event-name-input" class="block text-sm font-medium">Event Name</label>
                        <input type="text" id="edit-event-name-input" maxlength="50" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="edit-event-start-input" class="block text-sm font-medium">Start Time</label>
                            <input type="datetime-local" id="edit-event-start-input" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="edit-event-end-input" class="block text-sm font-medium">End Time</label>
                            <input type="datetime-local" id="edit-event-end-input" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium">Vehicles</label>
                        <div id="edit-event-vehicles-container" class="mt-1 grid grid-cols-3 md:grid-cols-5 gap-2 bg-input border border-border rounded-md p-2 h-32 overflow-y-auto"></div>
                    </div>
                    <div>
                        <label for="edit-event-checklists-select" class="block text-sm font-medium">Checklists</label>
                        <select id="edit-event-checklists-select" multiple class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 h-32"></select>
                    </div>
                    <div class="relative flex items-start">
                        <div class="flex items-center h-5">
                            <input id="edit-is-raceday-checkbox" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-border rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="edit-is-raceday-checkbox" class="font-medium">This is a Raceday Event</label>
                        </div>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-4">
                    <button id="cancel-edit-event-btn" type="button" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                    <button id="save-event-btn" type="submit" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <div id="edit-checklist-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-40">
        <div class="bg-card p-8 rounded-lg shadow-2xl w-full max-w-2xl">
            <h2 class="text-2xl font-bold mb-4" id="edit-checklist-title">Edit Checklist</h2>
            <form id="edit-checklist-form">
                <div class="space-y-4">
                    <div>
                        <label for="edit-checklist-name-input" class="block text-sm font-medium">Template Name</label>
                        <input type="text" id="edit-checklist-name-input" maxlength="50" class="mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <h3 class="font-semibold mb-2">Pre-Race Tasks</h3>
                            <div id="edit-pre-race-tasks" class="space-y-2"></div>
                            <input type="text" id="add-pre-race-task-input" class="mt-2 w-full bg-input border border-border rounded-md shadow-sm py-1 px-2" placeholder="Add a new task...">
                        </div>
                        <div>
                            <h3 class="font-semibold mb-2">Mid-Day Tasks</h3>
                            <div id="edit-mid-day-tasks" class="space-y-2"></div>
                            <input type="text" id="add-mid-day-task-input" class="mt-2 w-full bg-input border border-border rounded-md shadow-sm py-1 px-2" placeholder="Add a new task...">
                        </div>
                        <div>
                            <h3 class="font-semibold mb-2">Post-Race Tasks</h3>
                            <div id="edit-post-race-tasks" class="space-y-2"></div>
                            <input type="text" id="add-post-race-task-input" class="mt-2 w-full bg-input border border-border rounded-md shadow-sm py-1 px-2" placeholder="Add a new task...">
                        </div>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-4">
                    <button id="cancel-edit-checklist-btn" type="button" class="px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500">Cancel</button>
                    <button id="save-checklist-btn" type="submit" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>
</html>
